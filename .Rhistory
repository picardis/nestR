install.packages("shinydashboard")
install.packages("kableExtra")
install.packages("rjags")
library(nestR)
library(nestR)
dist_mat <- function(dat){
# Arrange distance matrix
dmat <- data.frame(orig_id = rep(dat$loc_id, nrow(dat))) %>%
left_join(dplyr::select(dat, loc_id, orig_lon = long, orig_lat = lat),
by = c("orig_id" = "loc_id")) %>%
mutate(dest_id = rep(dat$loc_id, each=nrow(dat))) %>%
left_join(dplyr::select(dat, loc_id, dest_lon = long, dest_lat = lat),
by = c("dest_id" = "loc_id"))
# Convert to data.table
data.table::setDT(dmat)
# Use := operator (data.table) to calculate geographic distance
dmat[ , dist := geosphere::distGeo(matrix(c(orig_lon, orig_lat), ncol = 2),
matrix(c(dest_lon, dest_lat), ncol = 2))]
#Return distance matrix
return(dmat)
}
library(nestR)
# At the end
# Combine results
# Each file (per burst) is a list with an element per buffer.
# Convert into a list with an element per buffer where each element is a data.frame for all bursts.
files_buffers <- list.files(temp_name, pattern = "buffer_comparison_", full.names = TRUE)
temp_name <- paste0("output/temp_", timestamp)
# Create a folder to store the outputs
# Temporary folder name
timestamp <- format(Sys.time(), "%Y%m%d_%H%M%S")
temp_name <- paste0("output/temp_", timestamp)
library(nestR)
library(nestR)
library(nestR)
library(nestR)
library(markdown)
